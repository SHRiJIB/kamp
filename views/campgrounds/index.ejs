<% layout("layouts/boilerplate") %>
<link rel="stylesheet" href="/styles/index.css" />
<div id="map" class="cluster-map"></div>

<div class="container mb-3">
  <h1 class="mt-3">Find your next gateway</h1>
  <div class="row">
    <% for(let camp of campgrounds.slice(0,12)) {%>
    <div class="col-12 col-lg-4 col-md-6">
      <div class="card">
        <% if(camp.images.length){ %>
        <a href="/campgrounds/<%= camp._id %>">
          <img
            src="<%= camp.images[0].url %>"
            alt="campground image"
            class="cardImg"
          />
        </a>
        <% } else { %>
        <img
          src="https://phillipbrande.files.wordpress.com/2013/10/random-pic-14.jpg"
          alt="campground image"
          class=""
        />
        <% } %>

        <div class="card-body">
          <h5 class="card-title"><%= camp.title %></h5>
          <p class="card-text">
            <small class="text-muted"><%= camp.location %> </small>
          </p>
        </div>
      </div>
    </div>
    <% } %>
  </div>
</div>
<script>
  const mapBoxToken = '<%- process.env.MAPBOX %>'
  const campgrounds = {features: <%- JSON.stringify(campgrounds) %>}
</script>
<script src="/javascript/clusterMap.js"></script>
